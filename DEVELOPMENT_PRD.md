# 📁 Pancrepal 小胰宝 - 最终版开发手册与全量提示词 (V2.2)

## 1. 产品核心定义
*   **统一定义**：Pancrepal 小胰宝，您的个人化肿瘤科普与病情主动管理伙伴。
*   **产品定位**：面向肿瘤患者及家属的「全病程科普与风险管理公益平台」。
*   **核心使命**：消除信息孤岛，建立患者主动管理意识，通过 AI 与游戏化手段提升生命质量。

## 2. 交互逻辑与功能矩阵

### 2.1 智能配额系统 (Smart Quota)
*   **双轨制逻辑**：
    *   **每日免费额度**：每天 10 次，次日 0 点清零（Expire-daily）。
    *   **永久奖励额度**：通过任务（答题、分享）获得，永久有效，无限累积（Persistent）。
*   **扣除规则**：提问时优先消耗当日免费额度，耗尽后自动启用永久奖励额度。
*   **可视化**：在个人中心和聊天页顶部实时展示两类额度的对比。

### 2.2 科普路线图 (Active Roadmap)
*   **结构**：分为「临床治疗、营养管理、心理支持、生活质量」四大版块。
*   **跳转协议**：所有内置工具链接必须支持微信环境唤起：
    *   小程序跳转：`weixin://dl/business/?ticket=TICKET_ID`。
    *   外部 H5：标准 HTTPS 链接。

### 2.3 互助社区 (Social Support)
*   **视觉风格**：仿小红书的双列瀑布流卡片布局。
*   **审核流**：用户发帖进入 `isPending` 状态，显示“审核中”占位，通过后台逻辑后方可全网可见。
*   **互动激励**：发帖、被点赞、优质分享均可触发永久配额奖励。

### 2.4 知识闯关 (Quiz Game)
*   **机制**：每轮 5 道随机题，采用进度条式交互，实时反馈解析。
*   **核心价值**：将枯燥的科普指南转化为即时反馈的挑战任务。

## 3. 视觉与技术规范
*   **技术栈**：React 19 + Tailwind CSS + Lucide Icons + Google Gemini API。
*   **色彩体系**：
    *   `brand-core`: #67CFA7 (管理感/专业)
    *   `brand-orange`: #FF8A1F (奖励感/活力)
    *   `brand-bg`: #F9FAFB (纯净背景)
*   **UI 规范**：大圆角 (4xl/5xl)、毛玻璃导航栏、全局悬浮吉祥物 (Global Mascot)。

## 4. 复现提示词 (Master Prompt)
> “作为资深前端架构师，请构建『Pancrepal 小胰宝』应用。
> 1. **核心逻辑**：构建一个带永久配额系统的 AI 科普助手，集成 Gemini 模型。AI 严禁 Markdown，输出结构为【结论-标题】+ 详细解释，文末带法律免责声明。
> 2. **路线图模块**：实现多级树状图，点击节点进入详情页，详情页需包含基于 `weixin://dl/business/?ticket=` 协议的小程序跳转工具列表。
> 3. **社区模块**：实现仿小红书的瀑布流社区，支持发帖表单（含图片预览、多标签、审核中状态模拟）。
> 4. **游戏化模块**：实现一个包含结算奖励逻辑的 5 题式科普闯关游戏，支持进度条动画。
> 5. **视觉要求**：使用极简清新的品牌绿(#67CFA7)，组件需具有极圆润的边角，实现 mascot-float 吉祥物悬浮动画，确保移动端全屏无滚动条的沉浸式体验。”

---
**存档日期**：2025-12-23
**状态**：已同步最新 V2.2 协议修复与统一定义。